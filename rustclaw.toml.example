# RustClaw Configuration Example
# 
# Config loading priority (highest to lowest):
# 1. Environment variables (TELEGRAM_BOT_TOKEN, OPENAI_API_KEY, etc.)
# 2. Local ./rustclaw.toml (workspace override)
# 3. Global ~/.rustclaw/rustclaw.toml (auto-created on first run)

[telegram]
bot_token = ""  # Set via TELEGRAM_BOT_TOKEN env var

[providers]
default = "openai"  # or "ollama"

[providers.openai]
api_key = ""  # Set via OPENAI_API_KEY env var
model = "gpt-4o-mini"
base_url = ""  # Optional: Set via OPENAI_BASE_URL env var

[providers.ollama]
base_url = "http://localhost:11434"
model = "llama3"

[agent]
# Maximum number of tool calls per request (prevents infinite loops)
max_tool_iterations = 10

# Context window size in tokens (for compression decisions)
context_window = 128000

# Number of recent conversation turns to keep before compression
recent_turns = 10

[database]
path = "rustclaw.db"

[logging]
level = "info"  # trace, debug, info, warn, error

# MCP Configuration
[mcp]
startup_timeout = 10  # Global default timeout in seconds

[mcp.servers]
# Filesystem MCP server (stdio transport)
filesystem = "npx -y @modelcontextprotocol/server-filesystem /tmp"

# GitHub MCP server (requires GITHUB_TOKEN env var)
# github = "mcp-server-github"

# HTTP-based MCP server (Streamable HTTP transport)
# weather = "http://localhost:3000/mcp"

# Remote MCP server with Bearer token auth
# [mcp.servers.web-search]
# url = "https://open.bigmodel.cn/api/mcp/web_search_prime/mcp"
# headers = { Authorization = "Bearer your_api_key" }

# Stdio MCP server with explicit args and environment variables
# [mcp.servers.zai-mcp-server]
# command = "npx"
# args = ["-y", "@z_ai/mcp-server"]
# env = { Z_AI_API_KEY = "your_api_key", Z_AI_MODE = "ZHIPU" }

# Skills Configuration
[skills]
# Directories to scan for skills (supports multiple)
# Skills are modular capabilities with progressive disclosure:
# - Phase 1: Metadata (name, description) loaded at startup
# - Phase 2: Full content loaded on-demand when matched
directories = ["~/.rustclaw/skills", "./.rustclaw/skills", "./examples/skills"]