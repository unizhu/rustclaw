# Cross compilation configuration for rustclaw
# This file configures the cross-rs tool for building cross-platform binaries

[build]
# Configure environment variables for all targets
[build.env]
passthrough = [
    "RUST_BACKTRACE",
    "RUST_LOG",
    "CARGO_TERM_COLOR",
]

# x86_64 Linux configuration with OpenSSL
[target.x86_64-unknown-linux-gnu]
image = "ghcr.io/cross-rs/x86_64-unknown-linux-gnu:main"
pre-build = [
    "dpkg --add-architecture amd64",
    "apt-get update",
    "apt-get install -y --no-install-recommends libssl-dev:amd64 pkg-config",
    "rm -rf /var/lib/apt/lists/*"
]

# AArch64 Linux configuration with OpenSSL
[target.aarch64-unknown-linux-gnu]
image = "ghcr.io/cross-rs/aarch64-unknown-linux-gnu:main"
pre-build = [
    "dpkg --add-architecture arm64",
    "apt-get update", 
    "apt-get install -y --no-install-recommends libssl-dev:arm64 pkg-config",
    "rm -rf /var/lib/apt/lists/*"
]
